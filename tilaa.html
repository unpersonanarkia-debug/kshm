<!DOCTYPE html>
<html lang="fi" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tilaa oma verilinjan tarinasi ‚Äì Kadonneen Sukuhistorian Mets√§st√§j√§</title>
  <meta name="description" content="Tilaa henkil√∂kohtainen haploryhm√§raportti ja astu verilinjan seikkailuun.">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous"/>

  <style>
    body {
      font-family: Georgia, serif;
      background: linear-gradient(to bottom, #fdfaf3, #f5e9d2);
      background-attachment: fixed;
    }

    .parchment {
      background: rgba(255, 250, 240, 0.96);
      box-shadow: 0 10px 40px rgba(139, 69, 19, 0.15);
      border: 1px solid #d4a373;
    }

    .adventure-btn {
      background: linear-gradient(135deg, #b45309, #92400e);
      transition: all 0.4s ease;
    }

    .adventure-btn:hover {
      background: linear-gradient(135deg, #d97706, #b45309);
      transform: translateY(-4px) scale(1.03);
      box-shadow: 0 15px 30px rgba(180, 83, 9, 0.4);
    }

    .brand-header {
      background: #f5e9d2;
      border-bottom: 1px solid #e6d8b8;
    }

    .logo-hover {
      transition: transform 0.4s ease, filter 0.4s ease;
    }

    .logo-hover:hover {
      transform: scale(1.03);
      filter: drop-shadow(0 0 20px rgba(140, 100, 60, 0.45));
    }

    .input-field {
      background: rgba(255,255,255,0.85);
      border: 2px solid #d4a373;
      border-radius: 0.75rem;
      padding: 0.75rem 1rem;
      width: 100%;
      font-size: 1.125rem;
      transition: all 0.3s ease;
    }

    .input-field:focus {
      outline: none;
      border-color: #b45309;
      box-shadow: 0 0 0 3px rgba(180, 83, 9, 0.25);
      background: white;
    }
  </style>
</head>

<body class="text-gray-900 leading-relaxed">

  <!-- Header -->
  <header class="brand-header py-24 px-6 text-center">
    <div class="max-w-7xl mx-auto">
      <img
        src="logo-4.png"
        alt="Kadonneen Sukuhistorian Mets√§st√§j√§"
        class="mx-auto h-48 md:h-64 logo-hover"
      />
      <h1 class="mt-6 text-3xl md:text-4xl font-bold text-amber-900 tracking-wide">
        Tilaa oma verilinjan tarinasi
      </h1>
      <p class="mt-4 text-lg md:text-xl text-amber-800 max-w-2xl mx-auto">
        Astu seikkailuun, jossa haploryhm√§si muuttuu kertomukseksi vaelluksista, 
        arkeologisista l√∂yd√∂ist√§ ja selviytyjien verilinjoista.
      </p>
    </div>
  </header>

  <!-- Lomakeosio -->
  <main class="parchment py-20 px-6 md:px-12 lg:px-24 max-w-4xl mx-auto my-16 rounded-2xl">

    <section class="mb-12 text-center">
      <h2 class="text-4xl font-bold text-amber-900 mb-6">
        Aloita matkasi
      </h2>
      <p class="text-xl max-w-2xl mx-auto">
        T√§yt√§ tiedot alle. Raportti toimitetaan s√§hk√∂postiisi PDF-kirjana.
      </p>
    </section>

    <form id="orderForm" class="space-y-10">

      <!-- Nimi -->
      <div>
        <label for="name" class="block text-xl font-bold text-amber-900 mb-2">
          Nimesi
        </label>
        <input type="text" id="name" name="name" required
               placeholder="Esim. Aino Virtanen"
               class="input-field" />
      </div>

      <!-- S√§hk√∂posti -->
      <div>
        <label for="email" class="block text-xl font-bold text-amber-900 mb-2">
          S√§hk√∂postiosoitteesi
        </label>
        <input type="email" id="email" name="email" required
               placeholder="aino@example.com"
               class="input-field" />
      </div>

      <!-- Haploryhm√§ -->
      <div>
        <label for="haplogroup" class="block text-xl font-bold text-amber-900 mb-2">
          Haploryhm√§si
        </label>
        <input type="text" id="haplogroup" name="haplogroup" required
               placeholder="Esim. H1-T16189C tai R1a-M417"
               class="input-field" />
        <p class="mt-2 text-sm text-gray-600">
          Voit sy√∂tt√§√§ √§itilinjan (mtDNA), is√§linjan (Y-DNA) tai molemmat pilkulla erotettuna.
        </p>
      </div>

      <!-- Lis√§toiveet -->
      <div>
        <label for="notes" class="block text-xl font-bold text-amber-900 mb-2">
          Lis√§toiveet tai taustatiedot (valinnainen)
        </label>
        <textarea id="notes" name="notes" rows="4"
                  placeholder="Esim. tied√§n suvun tulevan Karjalasta / kiinnostaa erityisesti viikinkiaika..."
                  class="input-field resize-none"></textarea>
      </div>

      <!-- GDPR -->
      <div class="flex items-start gap-4">
        <input type="checkbox" id="gdpr" required class="mt-1 h-5 w-5 accent-amber-800">
        <label for="gdpr" class="text-lg">
          Hyv√§ksyn, ett√§ tietojani k√§ytet√§√§n vain raportin tuottamiseen 
          ja toimitukseen (<a href="/tietosuoja" class="underline decoration-amber-700">tietosuojaseloste</a>).
        </label>
      </div>

      <!-- CTA -->
      <div class="text-center pt-8">
        <button type="submit"
                class="adventure-btn text-white font-bold text-xl py-6 px-16 rounded-full shadow-2xl uppercase">
          üîç Aloita seikkailu nyt
        </button>
        <p class="mt-6 text-lg text-gray-700">
          Hinta: <span class="font-bold text-amber-900">49 ‚Ç¨</span> ‚Ä¢ PDF toimitetaan s√§hk√∂postiisi
        </p>
      </div>

    </form>

    <!-- Kiitos-viesti -->
    <div id="thankYou" class="hidden text-center py-20">
      <h2 class="text-4xl font-bold text-amber-900 mb-6">
        ‚ú® Kiitos tilauksestasi!
      </h2>
      <p class="text-xl mb-6">
        Verilinjan kaivaus on aloitettu. Raporttisi toimitetaan s√§hk√∂postiisi pian.
      </p>
      <p class="text-lg text-gray-700">
        ‚Äî Kadonneen Sukuhistorian Mets√§st√§j√§
      </p>
    </div>

  </main>

  <!-- Footer -->
  <footer class="text-center py-12 border-t border-amber-800/30 mt-20">
    <p class="text-lg">¬© 2026 Kadonneen Sukuhistorian Mets√§st√§j√§</p>
    <p class="mt-4 text-sm text-gray-600">
      DNA-seikkailuja vastuullisesti ‚Ä¢ Yhteydenotot: 
      <a href="mailto:info@kshm.fi" class="underline decoration-amber-700">
        info@kshm.fi
      </a>
    </p>
  </footer>

  <!-- Takaisin yl√∂s -->
  <button
    onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
    class="fixed bottom-8 right-8 bg-amber-800 text-white p-4 rounded-full shadow-lg hover:bg-amber-700 transition z-50">
    <i class="fas fa-arrow-up text-2xl"></i>
  </button>

  <!-- JS: Lomakkeen l√§hetys -->
  <script>
    document.getElementById("orderForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      const form = e.target;
      const data = {
        name: form.name.value,
        email: form.email.value,
        haplogroup: form.haplogroup.value,
        notes: form.notes.value
      };

      try {
        const res = await fetch("/api/order_report", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const result = await res.json();

        if (res.ok) {
          form.classList.add("hidden");
          document.getElementById("thankYou").classList.remove("hidden");
        } else {
          alert("Jotain meni pieleen: " + result.message);
        }
      } catch (err) {
        alert("Palvelimeen ei saatu yhteytt√§. Yrit√§ hetken kuluttua uudelleen.");
      }
    });
  </script>

</body>
</html>
