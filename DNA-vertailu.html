const populations = [
  {
    name: "Suomi (Nykyväestö)",
    sub: "Modern Finland (n~2000)",
    n: 2000,
    values: {
      "H": 41.0,
      "U5": 19.0,
      "V (HV0)": 5.0,  // "Amazigh-linkki": Erittäin korkea Fennoskandiassa
      "K1a4": 2.5,     // Neoliittinen maanviljelijälinja
      "W": 3.0,        // Suomalainen erityispiirre
      "J/T": 11.0,     // Yhteinen Lähi-itä-perimä
      "Muut": 18.5
    }
  },
  {
    name: "Muumio (Egypti)",
    sub: "Abusir el-Meleq (n=90) ~1388 BCE – 426 CE",
    n: 90,
    values: {
      "H": 18.0,
      "U6": 12.0,      // Pohjois-Afrikkalainen U-haara
      "K1a4": 4.5,     // Vahva neoliittinen perintö
      "V (HV0)": 1.5,  // Läsnä, mutta matala taajuus
      "J/T": 19.0,
      "M1": 3.0,       // Tyypillinen Niilin laakson linja
      "L0-L3": 6.0,    // Saharan eteläpuolinen vaikutus
      "Muut": 36.0
    }
  }
  // Lisää muut populaatiot (Altai, Tarim, YOO) tähän perään...
];
<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<title>mtDNA-vertailu: Suomi · Egypti · Tarim · Oleniy Ostrov</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;0,700;1,500&family=IBM+Plex+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#0e0d0b;--bg2:#161410;--bg3:#1e1b16;
  --line:#2e2a22;--dim:#5a5448;--mid:#8a7e6e;
  --text:#e8dcc8;--accent:#c8963c;--hot:#e05a3a;
  /* Uudet kategoriakohtaiset värit */
  --eurasia:#d4af37; /* K1a4 Maanviljely */
  --amazigh:#e67e22;  /* HV0/V Berber-linkki */
  --nordic:#3498db;   /* U5 Metsästäjä-keräilijä */
  --sahara:#9b59b6;   /* U6/M1 Pohjois-Afrikka */
  --africa:#444444;   /* L0-L3 SSA */
  --east:#cc3300;     /* C4 Siperia */
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'IBM Plex Mono',monospace;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
body::after{content:'';position:fixed;inset:0;pointer-events:none;z-index:999;
  background:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");opacity:.35}
.wrap{max-width:1320px;margin:0 auto;padding:0 28px 80px}
header{padding:52px 0 40px;border-bottom:1px solid var(--line);display:grid;grid-template-columns:1fr auto;gap:32px;align-items:end}
.kicker{font-size:.62rem;letter-spacing:.18em;text-transform:uppercase;color:var(--accent);margin-bottom:14px}
h1{font-family:'Playfair Display',serif;font-size:clamp(1.8rem,3.5vw,2.8rem);font-weight:700;line-height:1.1;letter-spacing:-.02em}
h1 em{font-style:italic;color:var(--accent)}
.subtitle{margin-top:12px;font-size:.74rem;line-height:1.85;color:var(--mid);max-width:620px}
.meta{font-size:.63rem;line-height:2.1;color:var(--dim);text-align:right;white-space:nowrap}
.meta strong{color:var(--mid)}
.controls{display:flex;gap:8px;padding:22px 0 18px;border-bottom:1px solid var(--line);margin-bottom:28px;align-items:center;flex-wrap:wrap}
.ctrl-lbl{font-size:.6rem;letter-spacing:.14em;text-transform:uppercase;color:var(--dim);margin-right:4px}
.btn{font-family:'IBM Plex Mono',monospace;font-size:.64rem;letter-spacing:.08em;padding:6px 16px;border:1px solid var(--line);background:transparent;color:var(--mid);cursor:pointer;transition:all .15s}
.btn:hover{border-color:var(--dim);color:var(--text)}
.btn.on{background:var(--accent);border-color:var(--accent);color:var(--bg);font-weight:500}
/* Stacked UI */
#view-bars{display:none}
.pop-row{display:grid;grid-template-columns:240px 1fr;gap:0;align-items:center;margin-bottom:12px;opacity:0;transform:translateX(-10px);animation:si .38s forwards}
@keyframes si{to{opacity:1;transform:translateX(0)}}
.pop-lbl{padding-right:24px;font-size:.61rem;line-height:1.5;color:var(--mid)}
.pop-lbl strong{display:block;font-family:'Playfair Display',serif;font-size:.85rem;font-weight:500;color:var(--text);margin-bottom:1px}
.pop-lbl .sub{color:var(--dim);font-size:.57rem}
.sbar{display:flex;height:30px;gap:1px;cursor:crosshair;background:var(--bg3);border:1px solid var(--line)}
.seg{height:100%;transition:opacity .15s,filter .15s;min-width:1px}
.seg:hover{opacity:.82;filter:brightness(1.25)}
/* Bars table */
.bars-grid{overflow-x:auto}
.bars-tbl{min-width:900px;width:100%;border-collapse:collapse}
.bars-tbl th{font-family:'Playfair Display',serif;font-size:.7rem;font-weight:500;color:var(--text);padding:8px 10px;text-align:left;border-bottom:1px solid var(--line);white-space:nowrap;vertical-align:bottom}
.bars-tbl th .ths{display:block;font-family:'IBM Plex Mono',monospace;font-size:.55rem;font-weight:300;color:var(--dim);margin-top:2px}
.bars-tbl td{padding:3px 10px;border-bottom:1px solid rgba(46,42,34,.55);vertical-align:middle}
.bars-tbl tr:hover td{background:rgba(200,150,60,.04)}
.cat-nm{font-size:.62rem;color:var(--mid);white-space:nowrap;display:flex;align-items:center;gap:7px}
.cdot{width:8px;height:8px;flex-shrink:0;border-radius:1px}
.bwrap{display:flex;align-items:center;gap:8px;min-width:85px}
.mbar{flex:1;height:13px;background:var(--bg3);position:relative;overflow:hidden}
.mfill{position:absolute;left:0;top:0;bottom:0;transition:width .5s cubic-bezier(.22,1,.36,1)}
.plbl{font-size:.59rem;color:var(--dim);width:26px;text-align:right;flex-shrink:0}
.plbl.v{color:var(--text)}
.grp-hdr{padding:16px 0 4px;font-size:.57rem;letter-spacing:.12em;text-transform:uppercase;color:var(--accent);border-bottom:1px solid var(--line)}
/* Legend */
.leg-sec{margin-top:44px;padding:28px;background:var(--bg2);border:1px solid var(--line)}
.leg-hd{font-size:.6rem;letter-spacing:.14em;text-transform:uppercase;color:var(--dim);margin-bottom:18px}
.leg-grp-title{width:100%;font-size:.57rem;letter-spacing:.1em;text-transform:uppercase;color:var(--accent);margin:12px 0 6px;border-bottom:1px solid var(--line);padding-bottom:4px}
.leg-wrap{display:flex;flex-wrap:wrap;gap:8px 24px}
.leg-item{display:flex;align-items:center;gap:8px;font-size:.62rem;color:var(--dim)}
.leg-sw{width:10px;height:10px;flex-shrink:0;border-radius:1px}
/* Cards */
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:44px}
.card{background:var(--bg2);padding:28px;border:1px solid var(--line);border-top:2px solid var(--accent);position:relative}
.card-lbl{font-size:.57rem;letter-spacing:.14em;text-transform:uppercase;color:var(--accent);margin-bottom:10px}
.card h3{font-family:'Playfair Display',serif;font-size:1.1rem;font-weight:500;color:var(--text);margin-bottom:12px;line-height:1.3}
.card p{font-size:.72rem;line-height:1.8;color:var(--mid)}
.card mark{background:none;color:var(--accent);font-weight:600}
/* Tooltip */
.tt{position:fixed;pointer-events:none;z-index:1000;background:var(--bg);border:1px solid var(--accent);padding:9px 13px;font-size:.67rem;line-height:1.6;transform:translate(14px,-50%);display:none;max-width:200px}
.tt strong{color:var(--accent);display:block;font-size:.7rem}
@media(max-width:640px){header{grid-template-columns:1fr}.pop-row{grid-template-columns:1fr}.pop-lbl{padding-right:0;margin-bottom:8px}}
</style>
</head>
<body>
<div class="wrap">

<header>
  <div>
    <div class="kicker">Muinainen DNA · mtDNA-haploryhmät · AADR + Schuenemann 2017</div>
    <h1>Fennoskandian ja Niilin<br><em>yhteinen koodi</em></h1>
    <p class="subtitle">Vertailu nyky-Suomen, muinaisen Egyptin (Abusir el-Meleq) ja Euraasian muinaispopulaatioiden välillä. Visualisointi korostaa "silta-linjoja" kuten <strong>K1a4</strong> ja <strong>HV0/V</strong>.</p>
  </div>
  <div class="meta">
    <strong>Populaatioita</strong> 5<br>
    <strong>Haploryhmiä</strong> 12 luokkaa<br>
    <strong>Metodi</strong> Shotgun & Capture DNA
  </div>
</header>

<div class="controls">
  <span class="ctrl-lbl">Näkymä ·</span>
  <button class="btn on" id="btn-s" onclick="setView('stacked')">Pino-profiili</button>
  <button class="btn" id="btn-b" onclick="setView('bars')">Rinnakkaisvertailu</button>
</div>

<div id="view-stacked"></div>
<div id="view-bars"><div class="bars-grid"><table class="bars-tbl" id="btbl"></table></div></div>

<div class="leg-sec" id="legend-area"></div>

<div class="cards">
  <div class="card">
    <div class="card-lbl">Analyysi: Katkeamaton ketju</div>
    <h3>K1a4 ja HV0:n mysteeri</h3>
    <p>Visualisointi paljastaa, että Suomen nykyväestö ja muinaisen Egyptin muumiot jakavat <mark>K1a4-linjan</mark>, joka on neoliittisen vallankumouksen globaali sormenjälki. Erityisen hätkähdyttävä on <mark>HV0 / V</mark> -linja: se on Suomessa korkea, mutta se on täsmälleen sama linja, joka on säilynyt korkeana Pohjois-Afrikan eristyneissä <em>Amazigh</em>-populaatioissa.</p>
  </div>
  <div class="card">
    <div class="card-lbl">Karjala vs. Muumiot</div>
    <h3>Pohjoinen metsästäjäperintö</h3>
    <p><em>Yuzhnyy Oleniy Ostrov</em> (~6 500 BCE) edustaa Euroopan vanhinta kerrostumaa. <mark>U5-linjan</mark> dominanssi yhdistää Karjalan suoraan nyky-Suomen suomalaiseen perimään, kun taas Egyptin muumioilla esiintyvä <mark>U6</mark> on saman linjan eteläinen, afrikkalainen sisarhaara kymmenien tuhansien vuosien takaa.</p>
  </div>
  <div class="card">
    <div class="card-lbl">Tarimin Arvoitus</div>
    <h3>Idän kaukasialaiset</h3>
    <p>Tarimin muumiot kantavat massiivista <mark>C4-linjaa</mark>, joka on Siperian ja Itä-Aasian merkki, mutta heidän kytköksensä <mark>K-haploryhmään</mark> osoittaa, että jo pronssikaudella euraasialaiset geenivirrat ulottuivat Niililtä Kiinan rajalle saakka.</p>
  </div>
</div>

</div>

<div class="tt" id="tt"></div>

<script>
const cats = [
  { id: "K1a4", nm: "K1a4 (Maanviljely)", col: "var(--eurasia)", grp: "Yhdistävä Euraasia" },
  { id: "V", nm: "V / HV0 (Berber-linkki)", col: "var(--amazigh)", grp: "Yhdistävä Euraasia" },
  { id: "U5", nm: "U5 (Metsästäjä-keräilijä)", col: "var(--nordic)", grp: "Pohjoinen Perintö" },
  { id: "W", nm: "W (Suomalainen erityismerkki)", col: "var(--hot)", grp: "Pohjoinen Perintö" },
  { id: "C", nm: "C / C4 (Siperia/Altai)", col: "var(--east)", grp: "Pohjoinen Perintö" },
  { id: "U6", nm: "U6 / M1 (Pohjois-Afrikka)", col: "var(--sahara)", grp: "Eteläinen Perintö" },
  { id: "L", nm: "L0-L3 (Sub-Sahara)", col: "var(--africa)", grp: "Eteläinen Perintö" },
  { id: "H", nm: "H", col: "#666", grp: "Muut" },
  { id: "JT", nm: "J / T", col: "#555", grp: "Muut" },
  { id: "M", nm: "Muut", col: "#222", grp: "Muut" }
];

const data = [
  {
    name: "Suomi (Nykyväestö)",
    sub: "Fennoskandian nykyperimä (n~2000)",
    vals: { H: 41, U5: 19, V: 5, K1a4: 2.5, W: 3, JT: 11, M: 18.5 }
  },
  {
    name: "Muumio (Egypti)",
    sub: "Abusir el-Meleq (n=90) ~1388 BCE",
    vals: { H: 18, U6: 12, K1a4: 4.5, V: 1.5, JT: 19, L: 6, M: 39 }
  },
  {
    name: "Yuzhnyy Oleniy Ostrov",
    sub: "Karjala, Venäjä (n=12) ~6500 BCE",
    vals: { C: 50, U5: 33, JT: 8.5, M: 8.5 }
  },
  {
    name: "Tarim (Muumio)",
    sub: "Xiaohe, Kiina (n=18) ~2100 BCE",
    vals: { C: 72, V: 2, K1a4: 5, M: 21 }
  }
];

function setView(v) {
  document.getElementById('view-stacked').style.display = v==='stacked'?'block':'none';
  document.getElementById('view-bars').style.display = v==='bars'?'block':'none';
  document.getElementById('btn-s').classList.toggle('on', v==='stacked');
  document.getElementById('btn-b').classList.toggle('on', v==='bars');
}

function init() {
  const sView = document.getElementById('view-stacked');
  const bTbl = document.getElementById('btbl');
  const legArea = document.getElementById('legend-area');
  const tt = document.getElementById('tt');

  // Stacked View
  data.forEach(p => {
    const row = document.createElement('div');
    row.className = 'pop-row';
    row.innerHTML = `<div class="pop-lbl"><strong>${p.name}</strong><span class="sub">${p.sub}</span></div>`;
    const sbar = document.createElement('div');
    sbar.className = 'sbar';
    
    cats.forEach(c => {
      const val = p.vals[c.id] || 0;
      if(val > 0) {
        const seg = document.createElement('div');
        seg.className = 'seg';
        seg.style.width = val + '%';
        seg.style.background = c.col;
        seg.onmouseenter = (e) => {
          tt.style.display = 'block';
          tt.innerHTML = `<strong>${c.nm}</strong>${val}%`;
        };
        seg.onmousemove = (e) => {
          tt.style.left = e.clientX + 'px';
          tt.style.top = e.clientY + 'px';
        };
        seg.onmouseleave = () => tt.style.display='none';
        sbar.appendChild(seg);
      }
    });
    row.appendChild(sbar);
    sView.appendChild(row);
  });

  // Bars View
  let bHtml = `<thead><tr><th>Kategoria</th>`;
  data.forEach(p => bHtml += `<th>${p.name}<span class="ths">${p.sub}</span></th>`);
  bHtml += `</tr></thead><tbody>`;

  let lastGrp = "";
  cats.forEach(c => {
    if(c.grp !== lastGrp) {
      bHtml += `<tr><td colspan="${data.length + 1}" class="grp-hdr">${c.grp}</td></tr>`;
      lastGrp = c.grp;
    }
    bHtml += `<tr><td class="cat-nm"><span class="cdot" style="background:${c.col}"></span>${c.nm}</td>`;
    data.forEach(p => {
      const v = p.vals[c.id] || 0;
      bHtml += `<td><div class="bwrap"><div class="mbar"><div class="mfill" style="width:${v}%;background:${c.col}"></div></div><span class="plbl ${v>0?'v':''}">${v}%</span></div></td>`;
    });
    bHtml += `</tr>`;
  });
  bTbl.innerHTML = bHtml + `</tbody>`;

  // Legend
  legArea.innerHTML = `<div class="leg-hd">Haploryhmätyypit & Alkuperä</div>`;
  const grps = [...new Set(cats.map(c => c.grp))];
  grps.forEach(g => {
    const gDiv = document.createElement('div');
    gDiv.innerHTML = `<div class="leg-grp-title">${g}</div>`;
    const w = document.createElement('div');
    w.className = 'leg-wrap';
    cats.filter(c => c.grp === g).forEach(c => {
      w.innerHTML += `<div class="leg-item"><span class="leg-sw" style="background:${c.col}"></span>${c.nm}</div>`;
    });
    gDiv.appendChild(w);
    legArea.appendChild(gDiv);
  });
}

window.onload = init;
</script>
</body>
</html>
